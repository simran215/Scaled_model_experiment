

dynamics_wheel
% BMS_dictionary_data

% decel_min=4*(mu_kinetic*pi*disk_abore^2*Rm*num_pads/4)*0/1161/0.334
% decel_max=4*(mu_kinetic*pi*disk_abore^2*Rm*num_pads/4)*BrkPrsMax/1161/0.334
% acel_max=450*7.94/1161/0.334
% 4.5e4/3

%%%%%%%%%%%   Driver
% tau=0.15;
% L=6;
% Kpt=20000;
% aR=200;
% bR=2.5;
% cR=.28;
% g=9.8;
% a=VEH.FrontAxlePositionfromCG;
% b=VEH.RearAxlePositionfromCG;
% m=VEH.Mass;
% Cy_f=2*0.7*4.5e4;%5000;
% Cy_r=2*0.7*4.5e4;%7000;
% I=VEH.YawMomentInertia;
% Ksteer=18;
% theta=45*pi/180;
% steerOut=1;
% rw=0.3345;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Ndisks=4;
Reff_LSD=0.2;
Fc=500;
muc=[0.16 0.13 0.115 0.11 0.105 0.1025 0.10125];
dw=[0 10 20 40 60 80 100];
tauC_LSD=0.01;

k1=50000
b1=100
omega1_c=3000



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Eb_init=54.28*1000*3600;
 lf=1.58;%VEH.FrontAxlePositionfromCG;
 lr=1.65;%VEH.RearAxlePositionfromCG;
 m=3152;%VEH.Mass;
 C_af=200000;%2*0.7*4.5e4;%5000;
 C_ar=200000;%2*0.7*4.5e4;%7000;
 Iz=3691;%VEH.YawMomentInertia;
 rw=0.419;%0.3345;
 Qc=4.8;
 N_s=31;
 N_p=96;
 SOC_list=[0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.1 0.11 0.12 ...
            0.13 0.14 0.15 0.16 0.17 0.18 0.19 0.2 0.21 0.22 0.23 0.24 ...
            0.25 0.26 0.27 0.28 0.29 0.3 0.31 0.32 0.33 0.34 0.35 0.36 ...
            0.37 0.38 0.39 0.4 0.41 0.42 0.43 0.44 0.45 0.46 0.47 0.48 ...
            0.49 0.5 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59 0.6 0.61 ...
            0.62 0.63 0.64 0.65 0.66 0.67 0.68 0.69 0.7 0.71 0.72 0.73 ...
            0.74 0.75 0.76 0.77 0.78 0.79 0.8 0.81 0.82 0.83 0.84 0.85 ...
            0.86 0.87 0.88 0.89 0.9 0.91 0.92 0.93 0.94 0.95 0.96 0.97 ...
            0.98 0.99 1];
 R_dis=[0.108383589577359,0.104276452250663,0.0975073630060557,0.0937501268832217,...
   0.0893819468578965,0.085464471367626,0.08175755280038,0.0789657156023766,...
   0.0763700410896049,0.0743500050394976,0.0728433546029721,0.0716898267238282,...
   0.0709947524858037,0.0701675330798173,0.0687296636498531,0.0673712307537144,...
   0.066215812656778,0.0650205672726791,0.0638581443118,0.0632667622677965,...
   0.0628323749302964,0.0619127995096651,0.0610362875653991,0.0603620203223802,...
   0.0596877530793609,0.0589554578065767,0.0582121279560432,0.0577538001128373,...
   0.0573051863053595,0.0568565724978818,0.0563566623767877,0.055788965071129,...
   0.0551527157042777,0.0546601636283963,0.0541676729953156,0.0536763090566326,...
   0.0531776059040765,0.0526119236645948,0.0520712300263528,0.0515036752143958,...
   0.0509361204024388,0.0503587926465561,0.0497811381187243,0.0494179007317461,...
   0.0491061102549,0.0488178197046287,0.0485440631684004,0.0482703066321726,...
   0.0479965500959447,0.0478381475470897,0.0477067926990284,0.0473712163371034,...
   0.0470356399751788,0.0467000636132555,0.0464310667647791,0.0463210072143654,...
   0.0462716139198203,0.0462222206252756,0.0462261199933538,0.0462489440940042,...
   0.0463125045945074,0.0462585966454419,0.046201922872132,0.046144488080849,...
   0.0458836890808221,0.0457208666912199,0.0456935258730669,0.0456707901856075,...
   0.0456480544981481,0.0455856361429716,0.0453236882021848,0.0450859495122442,...
   0.0448483295871047,0.0446107096619652,0.0444608967355156,0.0443618965142365,...
   0.0442474499230245,0.0441330033318126,0.0440185567406002,0.0437935866730954,...
   0.0434800673484186,0.0432636629093239,0.0431695542324042,0.0433145404237085,...
   0.043616651255713,0.0439115402259742,0.0443155176840522,0.0447170344474341,...
   0.0451426585495343,0.0455784262459233,0.0461653340876942,0.0463666936277911,...
   0.0465478472510501,0.0466774333752156,0.0460938543815081,0.045231226285297,...
   0.0442160431848739,0.0431407757562075,0.0415552249991693,0.0395514196760085,...
   ];
 V_ocv=[3.01162183959268, 3.08575650269622, 3.14177499163339, 3.18631823552003, ...
      3.22334954767724, 3.25390136234099, 3.27878869705109, 3.30070350874259, ...
      3.32118523630503, 3.33873222862982, 3.35681278765286, 3.3727103181478, ...
      3.38793252475269, 3.40246133852855, 3.41323877471787, 3.42274053961048, ...
      3.43230513033606, 3.44127066639713, 3.45046092538443, 3.46050021597496, ...
      3.47059444208772, 3.47754582201769, 3.48403887676592, 3.49083263175798, ...
      3.49762638675004, 3.50414427848956, 3.51006189737342, 3.51650779121088, ...
      3.52300031605604, 3.5294928409012, 3.53574150484027, 3.54126505716735, ...
      3.54599126111241, 3.55084210438451, 3.55569196094666, 3.56052372392349, ...
      3.56532059653064, 3.56979945432131, 3.57444121267711, 3.57904303346503, ...
      3.58364485425295, 3.58840361874736, 3.5931676308725, 3.59914045642067, ...
      3.60536834334135, 3.61166009904557, 3.61797346412467, 3.62428682920377, ...
      3.63060019428287, 3.63762035332317, 3.64493091713641, 3.65193784155324, ...
      3.65894476597006, 3.66595169038689, 3.67346631195551, 3.68205597286888, ...
      3.69093403907072, 3.69981210527255, 3.70876940774879, 3.71776352136613, ...
      3.72686785650522, 3.73538877817079, 3.74389655120326, 3.7524031927436, ...
      3.76046489817023, 3.76888762106825, 3.7779024493972, 3.78684332393235, ...
      3.7957841984675, 3.80453642296868, 3.81235798589345, 3.82032795054979, ...
      3.82829600796219, 3.83626406537459, 3.84436267545786, 3.8525073311682, ...
      3.86057855536852, 3.86864977956884, 3.87672100376915, 3.8849361052788, ...
      3.89310639828889, 3.90173837211625, 3.91095173577988, 3.92144530461468, ...
      3.93240377767841, 3.94373568413835, 3.95558619350771, 3.96743304428185, ...
      3.9792002957498, 3.99089798499065, 4.00334195302942, 4.01527114968024, ...
      4.0272843604214, 4.03909414300309, 4.04916289177822, 4.05870791988182, ...
      4.06775178122738, 4.07651000374835, 4.08674414955216, 4.1040722856973, ...
      ];
 Nd=12;%7.94;
 eta_inv=1;eta_i=1;


%%%%%% Battery
BattSocInit = 0.75;                                  
SOCInit = 0.75;
SOE_init=SOCInit;

BattChargeMax=4.8;

BattCapInit = SOCInit*BattChargeMax;%3.5999999999999996;


BattTempBp = [263.15 273.15 298.15 313.15];

CapLUTBp = [0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.1 0.11 0.12 ...
            0.13 0.14 0.15 0.16 0.17 0.18 0.19 0.2 0.21 0.22 0.23 0.24 ...
            0.25 0.26 0.27 0.28 0.29 0.3 0.31 0.32 0.33 0.34 0.35 0.36 ...
            0.37 0.38 0.39 0.4 0.41 0.42 0.43 0.44 0.45 0.46 0.47 0.48 ...
            0.49 0.5 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59 0.6 0.61 ...
            0.62 0.63 0.64 0.65 0.66 0.67 0.68 0.69 0.7 0.71 0.72 0.73 ...
            0.74 0.75 0.76 0.77 0.78 0.79 0.8 0.81 0.82 0.83 0.84 0.85 ...
            0.86 0.87 0.88 0.89 0.9 0.91 0.92 0.93 0.94 0.95 0.96 0.97 ...
            0.98 0.99 1];

CapSOCBp = [0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.1 0.11 0.12 ...
            0.13 0.14 0.15 0.16 0.17 0.18 0.19 0.2 0.21 0.22 0.23 0.24 ...
            0.25 0.26 0.27 0.28 0.29 0.3 0.31 0.32 0.33 0.34 0.35 0.36 ...
            0.37 0.38 0.39 0.4 0.41 0.42 0.43 0.44 0.45 0.46 0.47 0.48 ...
            0.49 0.5 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59 0.6 0.61 ...
            0.62 0.63 0.64 0.65 0.66 0.67 0.68 0.69 0.7 0.71 0.72 0.73 ...
            0.74 0.75 0.76 0.77 0.78 0.79 0.8 0.81 0.82 0.83 0.84 0.85 ...
            0.86 0.87 0.88 0.89 0.9 0.91 0.92 0.93 0.94 0.95 0.96 0.97 ...
            0.98 0.99 1];

Em = [3.01162183959268; 3.08575650269622; 3.14177499163339; 3.18631823552003; ...
      3.22334954767724; 3.25390136234099; 3.27878869705109; 3.30070350874259; ...
      3.32118523630503; 3.33873222862982; 3.35681278765286; 3.3727103181478; ...
      3.38793252475269; 3.40246133852855; 3.41323877471787; 3.42274053961048; ...
      3.43230513033606; 3.44127066639713; 3.45046092538443; 3.46050021597496; ...
      3.47059444208772; 3.47754582201769; 3.48403887676592; 3.49083263175798; ...
      3.49762638675004; 3.50414427848956; 3.51006189737342; 3.51650779121088; ...
      3.52300031605604; 3.5294928409012; 3.53574150484027; 3.54126505716735; ...
      3.54599126111241; 3.55084210438451; 3.55569196094666; 3.56052372392349; ...
      3.56532059653064; 3.56979945432131; 3.57444121267711; 3.57904303346503; ...
      3.58364485425295; 3.58840361874736; 3.5931676308725; 3.59914045642067; ...
      3.60536834334135; 3.61166009904557; 3.61797346412467; 3.62428682920377; ...
      3.63060019428287; 3.63762035332317; 3.64493091713641; 3.65193784155324; ...
      3.65894476597006; 3.66595169038689; 3.67346631195551; 3.68205597286888; ...
      3.69093403907072; 3.69981210527255; 3.70876940774879; 3.71776352136613; ...
      3.72686785650522; 3.73538877817079; 3.74389655120326; 3.7524031927436; ...
      3.76046489817023; 3.76888762106825; 3.7779024493972; 3.78684332393235; ...
      3.7957841984675; 3.80453642296868; 3.81235798589345; 3.82032795054979; ...
      3.82829600796219; 3.83626406537459; 3.84436267545786; 3.8525073311682; ...
      3.86057855536852; 3.86864977956884; 3.87672100376915; 3.8849361052788; ...
      3.89310639828889; 3.90173837211625; 3.91095173577988; 3.92144530461468; ...
      3.93240377767841; 3.94373568413835; 3.95558619350771; 3.96743304428185; ...
      3.9792002957498; 3.99089798499065; 4.00334195302942; 4.01527114968024; ...
      4.0272843604214; 4.03909414300309; 4.04916289177822; 4.05870791988182; ...
      4.06775178122738; 4.07651000374835; 4.08674414955216; 4.1040722856973; ...
      ];

Np = 31;

Ns = 96;

RInt = ...
  [0.0569026752706954 0.0575506938968502 0.0576730924021387 0.0575627404981383 ...
   0.0573787336614568 0.0571931123196769 0.0568199985482458 0.0564119264640404 ...
   0.0561974340666893 0.0560805640860718 0.0557640899305305 0.0552758078650015 ...
   0.0548189443534337 0.0544259333099291 0.0540274760999271 0.0535758671077904 ...
   0.0531349994881705 0.0528572535310996 0.0526355618077634 0.05241465440856 ...
   0.0521579468207083 0.0518223143945811 0.0514768972622903 0.0510675229610378 ...
   0.0505095964874185 0.0501945334427734 0.0498797176307613 0.0495373961060803 ...
   0.0491644103064579 0.0487654107291386 0.0483761473296656 0.0479677996762051 ...
   0.0475582401973433 0.0471320171345666 0.0467023615052367 0.0463891096889397 ...
   0.0461612731425003 0.0459600308321164 0.0457714972173773 0.0455912172482256 ...
   0.045401878086972 0.0452074733937717 0.045081130644828 0.0449739781120764 ...
   0.0447708637688224 0.0444996528123283 0.0442323701107865 0.0439894155458385 ...
   0.043795500364483 0.0437196163755713 0.043691558272863 0.043666792326019 ...
   0.043632403395196 0.0436558797968862 0.04370400264962 0.0437507877780594 ...
   0.0437259099546763 0.0436988742417106 0.0436679396659216 0.0434822215344903 ...
   0.0433374476789035 0.0432862296072396 0.0432852698476647 0.0432893026186947 ...
   0.0432858504966527 0.0432410795080074 0.0430326492356583 0.0428344112022243 ...
   0.0426373383237344 0.0424403391287069 0.0422838320541592 0.0421769209995113 ...
   0.0420870573803085 0.0419817402408595 0.0418765172008633 0.0417713877096415 ...
   0.0415647093890872 0.0412865107127334 0.0410431011360397 0.0408824568725694 ...
   0.0408368250444724 0.0409391382481101 0.0411278931775794 0.0412898410175218 ...
   0.0415413222983294 0.0417924744129246 0.0420200849848618 0.0422646355102616 ...
   0.0425714787973455 0.0428474639811247 0.0428844181429655 0.0428897106182373 ...
   0.0428519609855629 0.0422520393218253 0.0414291365313999 0.040405329484825 ...
   0.0393067947660146 0.0380965961929673 0.036547444845604 0.0347308053875084 ...
   ;
   0.0629164241673035 0.0627185254641933 0.062749000065816 0.0627417873040859 ...
   0.0630054520942398 0.0629534275532269 0.0622819384348059 0.0616713767577988 ...
   0.0611604749865062 0.0606394855465489 0.0599400277636786 0.0594330831116956 ...
   0.0591735573989141 0.0588843888423636 0.0582944313979556 0.0577169262658863 ...
   0.0571944282028678 0.0566694734500324 0.0560950251456429 0.0555648918900395 ...
   0.0551851462437511 0.0548830931526911 0.0545831505646799 0.0542615240554891 ...
   0.0536780184680703 0.053223446924918 0.0527386940607366 0.0523578834040146 ...
   0.0519762672548851 0.0515887207828429 0.0511933655937913 0.0507492518278165 ...
   0.0503072657670471 0.049857312373411 0.0493952366343646 0.0489222848388122 ...
   0.0484349068792067 0.0479937511412309 0.047706524550899 0.0474590739208991 ...
   0.047228656875538 0.0470104531764788 0.0467923039400562 0.0465738556428423 ...
   0.0464149470666166 0.0462885853632802 0.0460768361525146 0.0457927929280686 ...
   0.0455084413080731 0.0452374151364121 0.0450287142958739 0.0449373388664691 ...
   0.044881363545326 0.0448212785934876 0.0448025483200918 0.0448023531711996 ...
   0.0448471894679132 0.0448423132528113 0.0447959899997263 0.0447481674362469 ...
   0.0446455627197633 0.0444498381223659 0.0443398951770333 0.0443358636115039 ...
   0.0443361836543485 0.0443347471451712 0.0443011880713526 0.0441188877988035 ...
   0.0439092986503984 0.0436974284356277 0.043485723220237 0.0433079260576688 ...
   0.0431885911913703 0.0430951515137186 0.0429917798002335 0.0428884374122953 ...
   0.0427851241717927 0.0425623650157809 0.0422613185703078 0.0420230599245612 ...
   0.0418812290666737 0.041906981721207 0.0420814944240542 0.0423005469320015 ...
   0.0425424967656185 0.0428467867901343 0.0431555553386227 0.0434957214268676 ...
   0.0438413122650902 0.0442856316869569 0.0444287367335074 0.0445149224339141 ...
   0.0445599067285984 0.0442026027287152 0.0434919446473354 0.0426037912126129 ...
   0.0416152471734632 0.0404992303278067 0.0390045186855108 0.0371542479614457 ...
   ;
   0.108383589577359 0.104276452250663 0.0975073630060557 0.0937501268832217 ...
   0.0893819468578965 0.085464471367626 0.08175755280038 0.0789657156023766 ...
   0.0763700410896049 0.0743500050394976 0.0728433546029721 0.0716898267238282 ...
   0.0709947524858037 0.0701675330798173 0.0687296636498531 0.0673712307537144 ...
   0.066215812656778 0.0650205672726791 0.0638581443118 0.0632667622677965 ...
   0.0628323749302964 0.0619127995096651 0.0610362875653991 0.0603620203223802 ...
   0.0596877530793609 0.0589554578065767 0.0582121279560432 0.0577538001128373 ...
   0.0573051863053595 0.0568565724978818 0.0563566623767877 0.055788965071129 ...
   0.0551527157042777 0.0546601636283963 0.0541676729953156 0.0536763090566326 ...
   0.0531776059040765 0.0526119236645948 0.0520712300263528 0.0515036752143958 ...
   0.0509361204024388 0.0503587926465561 0.0497811381187243 0.0494179007317461 ...
   0.0491061102549 0.0488178197046287 0.0485440631684004 0.0482703066321726 ...
   0.0479965500959447 0.0478381475470897 0.0477067926990284 0.0473712163371034 ...
   0.0470356399751788 0.0467000636132555 0.0464310667647791 0.0463210072143654 ...
   0.0462716139198203 0.0462222206252756 0.0462261199933538 0.0462489440940042 ...
   0.0463125045945074 0.0462585966454419 0.046201922872132 0.046144488080849 ...
   0.0458836890808221 0.0457208666912199 0.0456935258730669 0.0456707901856075 ...
   0.0456480544981481 0.0455856361429716 0.0453236882021848 0.0450859495122442 ...
   0.0448483295871047 0.0446107096619652 0.0444608967355156 0.0443618965142365 ...
   0.0442474499230245 0.0441330033318126 0.0440185567406002 0.0437935866730954 ...
   0.0434800673484186 0.0432636629093239 0.0431695542324042 0.0433145404237085 ...
   0.043616651255713 0.0439115402259742 0.0443155176840522 0.0447170344474341 ...
   0.0451426585495343 0.0455784262459233 0.0461653340876942 0.0463666936277911 ...
   0.0465478472510501 0.0466774333752156 0.0460938543815081 0.045231226285297 ...
   0.0442160431848739 0.0431407757562075 0.0415552249991693 0.0395514196760085 ...
   ;
   0.108526908512657 0.117675091219461 0.123235721151358 0.1269592063865 ...
   0.13007176519007 0.11760447732201 0.109861739845872 0.102688266858427 ...
   0.0951920841885006 0.0894405971833088 0.0847290612041114 0.0808654410303049 ...
   0.0781008124277296 0.0758200973191947 0.0740753739828204 0.0730483884312196 ...
   0.0717775113746253 0.0699809922564043 0.0685529978610315 0.0673110278766913 ...
   0.066035827753069 0.0649721598043218 0.0643472273406722 0.0636607362664936 ...
   0.06241964151448 0.0615766481652775 0.0608477889520826 0.0600710375601432 ...
   0.0592638337114022 0.0586485549213074 0.0581628633703293 0.0576814396290186 ...
   0.0571630828706713 0.0566027008133596 0.0559767559847191 0.0554420057127634 ...
   0.0549394148685769 0.0544394456663451 0.053932897417984 0.0533601985276673 ...
   0.052806478267994 0.0522246364684662 0.0516279649238172 0.0510048763984567 ...
   0.0504060232764387 0.0500208570273482 0.0496864919126905 0.0493730634198166 ...
   0.0491017275131393 0.0488348740634228 0.0485982342721116 0.0484362717227387 ...
   0.0482062495468085 0.0478436943449281 0.0474812803739901 0.0471587699790681 ...
   0.0469509261996528 0.046857132792125 0.0467936515375036 0.046762875795086 ...
   0.0467665146346548 0.0468131814834107 0.0467928072118045 0.046732749098755 ...
   0.0466712999380783 0.0464405353088968 0.0462435222647626 0.0461914680860085 ...
   0.0461714049038848 0.0461527033149323 0.0460937589038726 0.0458350783600561 ...
   0.0456007468322781 0.0453665779837316 0.0451429763331621 0.0450065444587326 ...
   0.0449148064886735 0.0448130766386168 0.0447111925241659 0.0445693406463699 ...
   0.0442949627645635 0.0439888408010778 0.0438010134105378 0.0438064778910552 ...
   0.0440286367126319 0.0443155978985943 0.0446421196562579 0.0450238104953598 ...
   0.0454416325431652 0.0458946977228338 0.0464588593578443 0.0468147357298707 ...
   0.0470155195655577 0.0471624250646365 0.0467232147099645 0.0458819648900484 ...
   0.044820832739481 0.0436752577355422 0.0421113383435228 0.0399046940541221 ...
   ];


%%% Bms

Active_Scenario_Index = 1;

BattTempInit = 25;

Battery = struct;
Battery.SOC_LUT = [0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.1 0.11 ...
                   0.12 0.13 0.14 0.15 0.16 0.17 0.18 0.19 0.2 0.21 0.22 ...
                   0.23 0.24 0.25 0.26 0.27 0.28 0.29 0.3 0.31 0.32 0.33 ...
                   0.34 0.35 0.36 0.37 0.38 0.39 0.4 0.41 0.42 0.43 0.44 ...
                   0.45 0.46 0.47 0.48 0.49 0.5 0.51 0.52 0.53 0.54 0.55 ...
                   0.56 0.57 0.58 0.59 0.6 0.61 0.62 0.63 0.64 0.65 0.66 ...
                   0.67 0.68 0.69 0.7 0.71 0.72 0.73 0.74 0.75 0.76 0.77 ...
                   0.78 0.79 0.8 0.81 0.82 0.83 0.84 0.85 0.86 0.87 0.88 ...
                   0.89 0.9 0.91 0.92 0.93 0.94 0.95 0.96 0.97 0.98 0.99 ...
                   1];
Battery.Temperature_LUT = [-10 0 25 40];
Battery.Capacity_LUT = [4.0452830188679245 4.19622641509434 4.8 4.7396226415094338 ...
                        ];
Battery.Em_LUT = ...
  [2.67308083890748 2.69983790584272 3.01162183959268 2.86240163764176;
   2.74411674383857 2.77709553299252 3.08575650269622 3.10368532958759;
   2.80408613070756 2.85458225827227 3.14177499163339 3.25034717079838;
   2.8624771199393 2.91946859699737 3.18631823552003 3.34855424571533;
   2.90851059762989 2.97417853232596 3.22334954767724 3.43064811108665;
   2.94904306487868 3.02000615086477 3.25390136234099 3.42185529482078;
   2.9829846775982 3.059291371096 3.27878869705109 3.43050989852402;
   3.01467102588632 3.09496484196907 3.30070350874259 3.44071299964936;
   3.04031502637974 3.12674479081287 3.32118523630503 3.43267540641794;
   3.06256828112616 3.15718897754199 3.33873222862982 3.43025866919859;
   3.08180972391664 3.17923894017981 3.35681278765286 3.43051368014861;
   3.09994219643193 3.20182864580018 3.3727103181478 3.43443796895028;
   3.11745672959311 3.22187721658941 3.38793252475269 3.43994058459314;
   3.13310707211205 3.23960649465882 3.40246133852855 3.44405109394373;
   3.1487398719378 3.25641376980014 3.41323877471787 3.4498835425305;
   3.16419740043589 3.27304403036943 3.42274053961048 3.4585162738651;
   3.17727721492538 3.2846839390152 3.43230513033606 3.46631004781749;
   3.19043285634435 3.29631598376726 3.44127066639713 3.47225603226413;
   3.20375047903647 3.30778464854717 3.45046092538443 3.47824331279432;
   3.21707149437287 3.31932324943581 3.46050021597496 3.48483865470277;
   3.22925996676714 3.32977602990596 3.47059444208772 3.49127553982294;
   3.2383868889704 3.34045270542752 3.47754582201769 3.49831779991133;
   3.24757984422546 3.3511368901944 3.48403887676592 3.50604983559465;
   3.25652444475524 3.36174988633933 3.49083263175798 3.51339441358201;
   3.26973099823334 3.37419778276896 3.49762638675004 3.52423490841915;
   3.27907874706598 3.38176044353304 3.50414427848956 3.53052019872262;
   3.28845740434298 3.38896832463791 3.51006189737342 3.53700924154114;
   3.2962879086499 3.39630638551446 3.51650779121088 3.54240534404373;
   3.30383569113816 3.40364466475969 3.52300031605604 3.54695267935405;
   3.31128032453581 3.41052531819173 3.5294928409012 3.55247536201982;
   3.31879914755824 3.41729119411582 3.53574150484027 3.55830145780434;
   3.32628302821302 3.42384508351982 3.54126505716735 3.56414590132334;
   3.33376374801146 3.43043093502926 3.54599126111241 3.56982804495573;
   3.3411631616448 3.43702928008335 3.55084210438451 3.57592191630786;
   3.34852515179874 3.44346569892493 3.55569196094666 3.58175684500519;
   3.35647523628696 3.44969587756717 3.56052372392349 3.58730485784645;
   3.36484238968862 3.45565350572708 3.56532059653064 3.59289585351729;
   3.37328368463802 3.4618382158002 3.56979945432131 3.59854037187677;
   3.38170646754664 3.46879681435846 3.57444121267711 3.60416398706861;
   3.39014352182103 3.47592001428593 3.57904303346503 3.60949849175149;
   3.39794474077901 3.48304264789548 3.58364485425295 3.61495070480321;
   3.40539836038988 3.49020287038675 3.58840361874736 3.62019531154598;
   3.41272852432599 3.49736298258047 3.5931676308725 3.62451477191292;
   3.41984273096896 3.50452235704502 3.59914045642067 3.62831057925683;
   3.42670657957841 3.51157393616099 3.60536834334135 3.6322155035492;
   3.43344896081806 3.51840419909616 3.61166009904557 3.63719410183182;
   3.4405109095843 3.52516417457995 3.61797346412467 3.64236702486675;
   3.44873268808403 3.53279609578609 3.62428682920377 3.64750816859827;
   3.45708687781347 3.54042683359991 3.63060019428287 3.65489871834086;
   3.46582550040321 3.54809185096997 3.63762035332317 3.6626383384271;
   3.47477363309487 3.55593273333412 3.64493091713641 3.67032279444335;
   3.48373616416453 3.56416007710473 3.65193784155324 3.67776786511636;
   3.48965109006109 3.57136410302838 3.65894476597006 3.68485100954488;
   3.49841360880394 3.57823529167579 3.66595169038689 3.69169880577685;
   3.50736907297879 3.58518026431897 3.67346631195551 3.69854714394795;
   3.51647801382037 3.59216341953858 3.68205597286888 3.70623776672118;
   3.5253032925984 3.60022043347903 3.69093403907072 3.71435180476055;
   3.5341192446988 3.60825132468342 3.69981210527255 3.72287610127664;
   3.54267859998101 3.61611766097783 3.70876940774879 3.73153321487676;
   3.55033383319664 3.62397820083558 3.71776352136613 3.74024866126038;
   3.55815891512649 3.63228455532207 3.72686785650522 3.7490300980919;
   3.56643014700452 3.64055269406354 3.73538877817079 3.75819043281353;
   3.57503274577875 3.64915770727498 3.74389655120326 3.76719876446817;
   3.58374053008747 3.65831678784201 3.7524031927436 3.77604915747862;
   3.59241599449073 3.66724458054663 3.76046489817023 3.78489499717692;
   3.60091192868379 3.67603207941569 3.76888762106825 3.79314530134652;
   3.6080216178808 3.68467919122963 3.7779024493972 3.80097504493609;
   3.61442115182625 3.69268498932986 3.78684332393235 3.80951772443538;
   3.62083010747475 3.70000785826675 3.7957841984675 3.81839401368681;
   3.62724004681827 3.70662266438316 3.80453642296868 3.82729811899408;
   3.63372198707518 3.71323970973247 3.81235798589345 3.8360257949511;
   3.6402835416662 3.71991705748168 3.82032795054979 3.84474513081012;
   3.64661392142099 3.72669090965776 3.82829600796219 3.8537122270169;
   3.65236102775333 3.73355593718929 3.83626406537459 3.86268524730424;
   3.65810836391539 3.74040888769993 3.84436267545786 3.87167702545762;
   3.6638559285622 3.74726190983568 3.8525073311682 3.88081997816891;
   3.66878470757947 3.7541150031615 3.86057855536852 3.89033593184951;
   3.67336360156698 3.75993950946097 3.86864977956884 3.90009963871546;
   3.67809636877851 3.76526665392993 3.87672100376915 3.90986296880406;
   3.68319183880964 3.77086960407953 3.8849361052788 3.91930516781753;
   3.68772643671462 3.77689510525862 3.89310639828889 3.92779647107153;
   3.69208408867541 3.78371744963242 3.90173837211625 3.93615377780073;
   3.69629015541716 3.79088456208952 3.91095173577988 3.94514391055564;
   3.69977613865149 3.7976550511933 3.92144530461468 3.95563102411644;
   3.70365852906775 3.80461190527635 3.93240377767841 3.96679995324859;
   3.7075479900398 3.81184578128018 3.94373568413835 3.97742462198399;
   3.70768662168838 3.81918453637082 3.95558619350771 3.9877771580632;
   3.70807454139538 3.82705230324092 3.96743304428185 3.99837656551385;
   3.70883318362952 3.8343455434533 3.9792002957498 4.01049380216667;
   3.70973855459654 3.83913997725046 3.99089798499065 4.02354019379175;
   3.70832111561141 3.84343723324531 4.00334195302942 4.03719057907573;
   3.70600863556697 3.84728450431993 4.01527114968024 4.05066277003821;
   3.70343278592612 3.85082348028628 4.0272843604214 4.06346240141539;
   3.69654460865309 3.85355048507587 4.03909414300309 4.07581640899457;
   3.68847664300054 3.85568249434592 4.04916289177822 4.08661703888092;
   3.67341611234636 3.85700675874819 4.05870791988182 4.09638090923093;
   3.65676850686521 3.85756111954345 4.06775178122738 4.10396287551436;
   3.64495326429473 3.85964108480671 4.07651000374835 4.1110572942707;
   3.63312945640943 3.8632914165115 4.08674414955216 4.12278148719479;
   3.62574741124305 3.87138803314728 4.1040722856973 4.13075433054309];
Battery.R0_LUT = ...
  [0.0569026752706954 0.0629164241673035 0.108383589577359 0.108526908512657 ...
   ;
   0.0575506938968502 0.0627185254641933 0.104276452250663 0.117675091219461 ...
   ;
   0.0576730924021387 0.062749000065816 0.0975073630060557 0.123235721151358 ...
   ;
   0.0575627404981383 0.0627417873040859 0.0937501268832217 0.1269592063865 ...
   ;
   0.0573787336614568 0.0630054520942398 0.0893819468578965 0.13007176519007 ...
   ;
   0.0571931123196769 0.0629534275532269 0.085464471367626 0.11760447732201 ...
   ;
   0.0568199985482458 0.0622819384348059 0.08175755280038 0.109861739845872 ...
   ;
   0.0564119264640404 0.0616713767577988 0.0789657156023766 0.102688266858427 ...
   ;
   0.0561974340666893 0.0611604749865062 0.0763700410896049 0.0951920841885006 ...
   ;
   0.0560805640860718 0.0606394855465489 0.0743500050394976 0.0894405971833088 ...
   ;
   0.0557640899305305 0.0599400277636786 0.0728433546029721 0.0847290612041114 ...
   ;
   0.0552758078650015 0.0594330831116956 0.0716898267238282 0.0808654410303049 ...
   ;
   0.0548189443534337 0.0591735573989141 0.0709947524858037 0.0781008124277296 ...
   ;
   0.0544259333099291 0.0588843888423636 0.0701675330798173 0.0758200973191947 ...
   ;
   0.0540274760999271 0.0582944313979556 0.0687296636498531 0.0740753739828204 ...
   ;
   0.0535758671077904 0.0577169262658863 0.0673712307537144 0.0730483884312196 ...
   ;
   0.0531349994881705 0.0571944282028678 0.066215812656778 0.0717775113746253 ...
   ;
   0.0528572535310996 0.0566694734500324 0.0650205672726791 0.0699809922564043 ...
   ;
   0.0526355618077634 0.0560950251456429 0.0638581443118 0.0685529978610315 ...
   ;
   0.05241465440856 0.0555648918900395 0.0632667622677965 0.0673110278766913 ...
   ;
   0.0521579468207083 0.0551851462437511 0.0628323749302964 0.066035827753069 ...
   ;
   0.0518223143945811 0.0548830931526911 0.0619127995096651 0.0649721598043218 ...
   ;
   0.0514768972622903 0.0545831505646799 0.0610362875653991 0.0643472273406722 ...
   ;
   0.0510675229610378 0.0542615240554891 0.0603620203223802 0.0636607362664936 ...
   ;
   0.0505095964874185 0.0536780184680703 0.0596877530793609 0.06241964151448 ...
   ;
   0.0501945334427734 0.053223446924918 0.0589554578065767 0.0615766481652775 ...
   ;
   0.0498797176307613 0.0527386940607366 0.0582121279560432 0.0608477889520826 ...
   ;
   0.0495373961060803 0.0523578834040146 0.0577538001128373 0.0600710375601432 ...
   ;
   0.0491644103064579 0.0519762672548851 0.0573051863053595 0.0592638337114022 ...
   ;
   0.0487654107291386 0.0515887207828429 0.0568565724978818 0.0586485549213074 ...
   ;
   0.0483761473296656 0.0511933655937913 0.0563566623767877 0.0581628633703293 ...
   ;
   0.0479677996762051 0.0507492518278165 0.055788965071129 0.0576814396290186 ...
   ;
   0.0475582401973433 0.0503072657670471 0.0551527157042777 0.0571630828706713 ...
   ;
   0.0471320171345666 0.049857312373411 0.0546601636283963 0.0566027008133596 ...
   ;
   0.0467023615052367 0.0493952366343646 0.0541676729953156 0.0559767559847191 ...
   ;
   0.0463891096889397 0.0489222848388122 0.0536763090566326 0.0554420057127634 ...
   ;
   0.0461612731425003 0.0484349068792067 0.0531776059040765 0.0549394148685769 ...
   ;
   0.0459600308321164 0.0479937511412309 0.0526119236645948 0.0544394456663451 ...
   ;
   0.0457714972173773 0.047706524550899 0.0520712300263528 0.053932897417984 ...
   ;
   0.0455912172482256 0.0474590739208991 0.0515036752143958 0.0533601985276673 ...
   ;
   0.045401878086972 0.047228656875538 0.0509361204024388 0.052806478267994 ...
   ;
   0.0452074733937717 0.0470104531764788 0.0503587926465561 0.0522246364684662 ...
   ;
   0.045081130644828 0.0467923039400562 0.0497811381187243 0.0516279649238172 ...
   ;
   0.0449739781120764 0.0465738556428423 0.0494179007317461 0.0510048763984567 ...
   ;
   0.0447708637688224 0.0464149470666166 0.0491061102549 0.0504060232764387 ...
   ;
   0.0444996528123283 0.0462885853632802 0.0488178197046287 0.0500208570273482 ...
   ;
   0.0442323701107865 0.0460768361525146 0.0485440631684004 0.0496864919126905 ...
   ;
   0.0439894155458385 0.0457927929280686 0.0482703066321726 0.0493730634198166 ...
   ;
   0.043795500364483 0.0455084413080731 0.0479965500959447 0.0491017275131393 ...
   ;
   0.0437196163755713 0.0452374151364121 0.0478381475470897 0.0488348740634228 ...
   ;
   0.043691558272863 0.0450287142958739 0.0477067926990284 0.0485982342721116 ...
   ;
   0.043666792326019 0.0449373388664691 0.0473712163371034 0.0484362717227387 ...
   ;
   0.043632403395196 0.044881363545326 0.0470356399751788 0.0482062495468085 ...
   ;
   0.0436558797968862 0.0448212785934876 0.0467000636132555 0.0478436943449281 ...
   ;
   0.04370400264962 0.0448025483200918 0.0464310667647791 0.0474812803739901 ...
   ;
   0.0437507877780594 0.0448023531711996 0.0463210072143654 0.0471587699790681 ...
   ;
   0.0437259099546763 0.0448471894679132 0.0462716139198203 0.0469509261996528 ...
   ;
   0.0436988742417106 0.0448423132528113 0.0462222206252756 0.046857132792125 ...
   ;
   0.0436679396659216 0.0447959899997263 0.0462261199933538 0.0467936515375036 ...
   ;
   0.0434822215344903 0.0447481674362469 0.0462489440940042 0.046762875795086 ...
   ;
   0.0433374476789035 0.0446455627197633 0.0463125045945074 0.0467665146346548 ...
   ;
   0.0432862296072396 0.0444498381223659 0.0462585966454419 0.0468131814834107 ...
   ;
   0.0432852698476647 0.0443398951770333 0.046201922872132 0.0467928072118045 ...
   ;
   0.0432893026186947 0.0443358636115039 0.046144488080849 0.046732749098755 ...
   ;
   0.0432858504966527 0.0443361836543485 0.0458836890808221 0.0466712999380783 ...
   ;
   0.0432410795080074 0.0443347471451712 0.0457208666912199 0.0464405353088968 ...
   ;
   0.0430326492356583 0.0443011880713526 0.0456935258730669 0.0462435222647626 ...
   ;
   0.0428344112022243 0.0441188877988035 0.0456707901856075 0.0461914680860085 ...
   ;
   0.0426373383237344 0.0439092986503984 0.0456480544981481 0.0461714049038848 ...
   ;
   0.0424403391287069 0.0436974284356277 0.0455856361429716 0.0461527033149323 ...
   ;
   0.0422838320541592 0.043485723220237 0.0453236882021848 0.0460937589038726 ...
   ;
   0.0421769209995113 0.0433079260576688 0.0450859495122442 0.0458350783600561 ...
   ;
   0.0420870573803085 0.0431885911913703 0.0448483295871047 0.0456007468322781 ...
   ;
   0.0419817402408595 0.0430951515137186 0.0446107096619652 0.0453665779837316 ...
   ;
   0.0418765172008633 0.0429917798002335 0.0444608967355156 0.0451429763331621 ...
   ;
   0.0417713877096415 0.0428884374122953 0.0443618965142365 0.0450065444587326 ...
   ;
   0.0415647093890872 0.0427851241717927 0.0442474499230245 0.0449148064886735 ...
   ;
   0.0412865107127334 0.0425623650157809 0.0441330033318126 0.0448130766386168 ...
   ;
   0.0410431011360397 0.0422613185703078 0.0440185567406002 0.0447111925241659 ...
   ;
   0.0408824568725694 0.0420230599245612 0.0437935866730954 0.0445693406463699 ...
   ;
   0.0408368250444724 0.0418812290666737 0.0434800673484186 0.0442949627645635 ...
   ;
   0.0409391382481101 0.041906981721207 0.0432636629093239 0.0439888408010778 ...
   ;
   0.0411278931775794 0.0420814944240542 0.0431695542324042 0.0438010134105378 ...
   ;
   0.0412898410175218 0.0423005469320015 0.0433145404237085 0.0438064778910552 ...
   ;
   0.0415413222983294 0.0425424967656185 0.043616651255713 0.0440286367126319 ...
   ;
   0.0417924744129246 0.0428467867901343 0.0439115402259742 0.0443155978985943 ...
   ;
   0.0420200849848618 0.0431555553386227 0.0443155176840522 0.0446421196562579 ...
   ;
   0.0422646355102616 0.0434957214268676 0.0447170344474341 0.0450238104953598 ...
   ;
   0.0425714787973455 0.0438413122650902 0.0451426585495343 0.0454416325431652 ...
   ;
   0.0428474639811247 0.0442856316869569 0.0455784262459233 0.0458946977228338 ...
   ;
   0.0428844181429655 0.0444287367335074 0.0461653340876942 0.0464588593578443 ...
   ;
   0.0428897106182373 0.0445149224339141 0.0463666936277911 0.0468147357298707 ...
   ;
   0.0428519609855629 0.0445599067285984 0.0465478472510501 0.0470155195655577 ...
   ;
   0.0422520393218253 0.0442026027287152 0.0466774333752156 0.0471624250646365 ...
   ;
   0.0414291365313999 0.0434919446473354 0.0460938543815081 0.0467232147099645 ...
   ;
   0.040405329484825 0.0426037912126129 0.045231226285297 0.0458819648900484 ...
   ;
   0.0393067947660146 0.0416152471734632 0.0442160431848739 0.044820832739481 ...
   ;
   0.0380965961929673 0.0404992303278067 0.0431407757562075 0.0436752577355422 ...
   ;
   0.036547444845604 0.0390045186855108 0.0415552249991693 0.0421113383435228 ...
   ;
   0.0347308053875084 0.0371542479614457 0.0395514196760085 0.0399046940541221 ...
   ];
Battery.R1_LUT = ...
  [0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035;
   0.0035 0.0035 0.0035 0.0035];
Battery.C1_LUT = ...
  [5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000;
   5000 5000 5000 5000];
Battery.Mass = 0.047;
Battery.ThermalMass = 44;
Battery.R_bleed = 20;
Battery.h_conv = 5;
Battery.cell_area = 0.0037;
Battery.TempInit = 25;

Battery.SOCInit = 0.75;

Battery.Model = 'panasonic ncr18650bd';

Battery.DischargeCycle_LUT = [1 5 9 13 17 21 25 29 33 37 41 45 49 53 57 ...
                              61 65 69 73 77 81 85 89 93 97 101 105 109 ...
                              113 117 121 125 129 133 137 141 145 149 153 ...
                              157 161 165 169 173 177 181 185 189 193 197 ...
                              201 205 209 213 217 221 225 229 233 237 241 ...
                              245 249 253 257 261 265 269 273 277 281 285 ...
                              289 293 297 301 305 309 313 317];
Battery.deltaEm_LUT = [0 -0.363115641304313 -0.600096647258061 -0.689070000839163 ...
                       -0.767733802510094 -0.846397604180982 -0.926368385457732 ...
                       -0.992711297521374 -1.05704974111402 -1.12227693901941 ...
                       -1.19018070586953 -1.25808447271969 -1.31699459747949 ...
                       -1.35876443799176 -1.40168267641948 -1.44460091484717 ...
                       -1.48751915327489 -1.53043739170261 -1.57335563013032 ...
                       -1.62198241592881 -1.672321844982 -1.71858340022581 ...
                       -1.76179802551141 -1.80501265079698 -1.84822727608258 ...
                       -1.89179371360454 -1.93575272784255 -1.97971174208057 ...
                       -2.02367075631858 -2.06762977055659 -2.111719791091 ...
                       -2.15588700405738 -2.19980020032086 -2.24365853098258 ...
                       -2.28751686164429 -2.33137519230598 -2.37523352296769 ...
                       -2.4190918536294 -2.45982559030671 -2.49599372373079 ...
                       -2.53216185715484 -2.56832999057891 -2.60449812400298 ...
                       -2.64066625742706 -2.67683439085111 -2.71300252427518 ...
                       -2.74917065769926 -2.78367585394309 -2.81632179346182 ...
                       -2.84833485789777 -2.88034792233372 -2.91236098676965 ...
                       -2.9443740512056 -2.97638711564155 -3.0084001800775 ...
                       -3.04041324451347 -3.07260346058516 -3.1035900825394 ...
                       -3.13082308990778 -3.15805609727614 -3.18528910464451 ...
                       -3.21252211201287 -3.23975511938126 -3.26698812674961 ...
                       -3.29422113411798 -3.32122400937752 -3.34634756040083 ...
                       -3.37152613072624 -3.39670470105166 -3.42188327137708 ...
                       -3.4470618417025 -3.47224041202792 -3.49938358795341 ...
                       -3.52900276724094 -3.55862194652843 -3.58824112581595 ...
                       -3.61786030510346 -3.64748858267616 -3.67711690908552 ...
                       -3.70674523549488];
Battery.deltaCapacity_LUT = [0 -0.860019120059007 -1.71332421702079 -2.08194002639565 ...
                             -2.45055583577056 -2.81917164514544 -3.18778745452034 ...
                             -3.48884924256567 -3.78081482359822 -4.07278040463078 ...
                             -4.36474598566332 -4.65671156669588 -4.91000721732096 ...
                             -5.08494410055826 -5.25988098379556 -5.43481786703286 ...
                             -5.60975475027016 -5.78469163350746 -5.95962851674477 ...
                             -6.13456539998206 -6.30950228321938 -6.47026795816407 ...
                             -6.62044510557951 -6.77062225299495 -6.92079940041038 ...
                             -7.07097654782583 -7.22115369524125 -7.3713308426567 ...
                             -7.52150799007212 -7.67168513748756 -7.8223098416152 ...
                             -7.97319825819041 -8.12408667476563 -8.27497509134084 ...
                             -8.42586350791606 -8.57675192449127 -8.72764034106648 ...
                             -8.8785287576417 -9.01789522921441 -9.13717923376072 ...
                             -9.25646323830702 -9.37574724285333 -9.49503124739961 ...
                             -9.61431525194592 -9.73359925649221 -9.85288326103849 ...
                             -9.9721672655848 -10.0914512701311 -10.2059878190689 ...
                             -10.3183039593139 -10.430620099559 -10.542936239804 ...
                             -10.655252380049 -10.7675685202941 -10.8798846605391 ...
                             -10.9922008007841 -11.1045169410292 -11.2125891928512 ...
                             -11.3075699375911 -11.402550682331 -11.4975314270709 ...
                             -11.5925121718108 -11.6874929165507 -11.7824736612906 ...
                             -11.8774544060305 -11.9716325174515 -12.058857953676 ...
                             -12.1460833899004 -12.2333088261248 -12.3205342623493 ...
                             -12.4077596985737 -12.4949851347981 -12.5890165007581 ...
                             -12.6916254178083 -12.7942343348584 -12.8968432519086 ...
                             -12.9994521689588 -13.102061086009 -13.2046700030592 ...
                             -13.3072789201093];
Battery.cond_thickness = 0.001;
Battery.thermal_conductivity = 205;

CellType = 1;

HighTempDchrgCurrentLim = Simulink.Signal;
HighTempDchrgCurrentLim.CoderInfo.StorageClass = 'Auto';
HighTempDchrgCurrentLim.Description = '';
HighTempDchrgCurrentLim.DataType = 'single';
HighTempDchrgCurrentLim.Min = [];
HighTempDchrgCurrentLim.Max = [];
HighTempDchrgCurrentLim.DocUnits = '';
HighTempDchrgCurrentLim.Dimensions = -1;
HighTempDchrgCurrentLim.DimensionsMode = 'auto';
HighTempDchrgCurrentLim.Complexity = 'auto';
HighTempDchrgCurrentLim.SampleTime = -1;
HighTempDchrgCurrentLim.InitialValue = '';

LowTempDchrgCurrentLim = Simulink.Signal;
LowTempDchrgCurrentLim.CoderInfo.StorageClass = 'Auto';
LowTempDchrgCurrentLim.Description = '';
LowTempDchrgCurrentLim.DataType = 'single';
LowTempDchrgCurrentLim.Min = [];
LowTempDchrgCurrentLim.Max = [];
LowTempDchrgCurrentLim.DocUnits = '';
LowTempDchrgCurrentLim.Dimensions = -1;
LowTempDchrgCurrentLim.DimensionsMode = 'auto';
LowTempDchrgCurrentLim.Complexity = 'auto';
LowTempDchrgCurrentLim.SampleTime = -1;
LowTempDchrgCurrentLim.InitialValue = '';

MaxChrgCurrLim = Simulink.Parameter;
MaxChrgCurrLim.Value = single(6.36);
MaxChrgCurrLim.Complexity = 'real';
MaxChrgCurrLim.HasCoderInfo = false;
MaxChrgCurrLim.Description = '';
MaxChrgCurrLim.DataType = 'single';
MaxChrgCurrLim.Min = [];
MaxChrgCurrLim.Max = [];
MaxChrgCurrLim.DocUnits = '';

MaxDchrgCurrLim = Simulink.Parameter;
MaxDchrgCurrLim.Value = single(-20);
MaxDchrgCurrLim.Complexity = 'real';
MaxDchrgCurrLim.HasCoderInfo = false;
MaxDchrgCurrLim.Description = '';
MaxDchrgCurrLim.DataType = 'single';
MaxDchrgCurrLim.Min = [];
MaxDchrgCurrLim.Max = [];
MaxDchrgCurrLim.DocUnits = '';

MinCellVoltDchrgCurrentLim = Simulink.Signal;
MinCellVoltDchrgCurrentLim.CoderInfo.StorageClass = 'Auto';
MinCellVoltDchrgCurrentLim.Description = '';
MinCellVoltDchrgCurrentLim.DataType = 'single';
MinCellVoltDchrgCurrentLim.Min = [];
MinCellVoltDchrgCurrentLim.Max = [];
MinCellVoltDchrgCurrentLim.DocUnits = '';
MinCellVoltDchrgCurrentLim.Dimensions = -1;
MinCellVoltDchrgCurrentLim.DimensionsMode = 'auto';
MinCellVoltDchrgCurrentLim.Complexity = 'auto';
MinCellVoltDchrgCurrentLim.SampleTime = -1;
MinCellVoltDchrgCurrentLim.InitialValue = '';


MinCellVoltDchrgCurrentLim_Table=[0 0.5 1];
MinCellVoltDchrgCurrentLim_BP=[2.5; 2.75; 3];

MinCellVoltDchrgCurrentLimTable = Simulink.LookupTable;
MinCellVoltDchrgCurrentLimTable.Table.DataType = 'single';
MinCellVoltDchrgCurrentLimTable.Table.Min = [];
MinCellVoltDchrgCurrentLimTable.Table.Max = [];
MinCellVoltDchrgCurrentLimTable.Table.Unit = '';
MinCellVoltDchrgCurrentLimTable.Table.FieldName = ...
  'DischargeCurrentRate';
MinCellVoltDchrgCurrentLimTable.Table.Description = ...
  'Discharge Current Rate Based On Mim Cell Voltage';
MinCellVoltDchrgCurrentLimTable.Table.Value = single( ...
  [0 0.5 1]);
MinCellVoltDchrgCurrentLimTable.BreakpointsSpecification = ...
  'Explicit values';
MinCellVoltDchrgCurrentLimTable.SupportTunableSize = false;
MinCellVoltDchrgCurrentLimTable.Breakpoints.DataType = 'single';
MinCellVoltDchrgCurrentLimTable.Breakpoints.Min = [];
MinCellVoltDchrgCurrentLimTable.Breakpoints.Max = [];
MinCellVoltDchrgCurrentLimTable.Breakpoints.Unit = 'V';
MinCellVoltDchrgCurrentLimTable.Breakpoints.FieldName = ...
  'MinCellVoltage';
MinCellVoltDchrgCurrentLimTable.Breakpoints.Description = ...
  'Minimum Cell Voltage';
MinCellVoltDchrgCurrentLimTable.Breakpoints.Value = ...
  [2.5; 2.75; 3];
MinCellVoltDchrgCurrentLimTable.Breakpoints.TunableSizeName = 'N1';
MinCellVoltDchrgCurrentLimTable.HasCoderInfo = false;
MinCellVoltDchrgCurrentLimTable.StructTypeInfo.Name = ...
  'MinCellVoltDchrgCurrentLimTable';
MinCellVoltDchrgCurrentLimTable.StructTypeInfo.DataScope = 'Auto';
MinCellVoltDchrgCurrentLimTable.StructTypeInfo.HeaderFileName = '';

Np_Module = 31;

Ns_Module = 24;

NumModules = 4;

OverCellVoltageLimit = single(4.2);

TestCase = 1;

UnderCellVoltageLimit = single(2.5);

Ts = 0.1;

%%%%
BattChrgMax = -105500;

BattDischrgMax = 211000;
BrkPrsMax = 5.0E+6;
ChrgLmt_bpt = [1 1 1 1 1 1 1 1 0.7 0.35 0];

DischrgLmt_bpt = [0 0.35 0.7 1 1 1 1 1 1 1 1];

MotMapEff = 0;

MotSpd = [0 1600 3200 4477.56 4800 6400 8000 9600 11200 12800 14400 16000 ...
          ];

MotTrq = [450 450 450 450 419.771162404874 314.828371803655 251.862697442924 ...
          209.885581202437 179.901926744946 157.414185901828 139.923720801625 ...
          125.931348721462];

Ndiff = Nd;%9.04; 

RegenBrkCutOff = [0 1];

RegenBrkSpd_bpt = [5 9];

Rm = 0.177;

SOC_bpt = [0 10 20 30 40 50 60 70 80 90 100];

T_eff_bp = [0 32.142857142857146 64.285714285714292 96.428571428571431 ...
            128.57142857142858 160.71428571428572 192.85714285714286 225 ...
            257.14285714285717 289.28571428571428 321.42857142857144 353.57142857142856 ...
            385.71428571428572 417.85714285714283 450];

disk_abore = 0.05;

efficiency_table = ...
  [86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 ...
   86.7;
   86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 ...
   86.7;
   86.7 86.7 91.8 91.8 91.8 91.8 91.8 91.8 91.8 91.8 89.76 89.76 89.76 ...
   89.76 89.76;
   86.7 86.7 93.84 93.84 93.84 93.84 93.84 93.84 93.84 93.84 93.84 91.8 ...
   91.8 91.8 91.8;
   86.7 86.7 93.84 93.84 94.86 94.86 94.86 94.86 93.84 93.84 93.84 91.8 ...
   91.8 91.8 91.8;
   86.7 86.7 94.86 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 ...
   95.88 95.88 95.88;
   86.7 86.7 94.86 95.88 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9 96.9;
   86.7 86.7 94.86 95.88 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9 96.9;
   86.7 86.7 94.86 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9;
   86.7 86.7 94.86 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9;
   86.7 86.7 94.86 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 ...
   95.88 95.88 95.88;
   86.7 86.7 91.8 93.84 94.86 94.86 94.86 94.86 94.86 94.86 94.86 94.86 ...
   94.86 94.86 94.86];

mu_kinetic = 0.2;

num_pads = 2;

w_eff_bp = [0 1600 3200 4477.56 4800 6400 8000 9600 11200 12800 14400 16000 ...
            ];

%%%% Motor


EV_current = 200;

EV_motion = [20 4 0.8];

EV_sf = 2000;

Fs = 0;

Fv = 0.0025;

Jcomp = 0.0227;

Ki = 251.3274;

Kisa = 346.6583;

Kp_d = 0.47149;

Kp_q = 0.52125;

Ksa = 85.4316;

Ksf = 1996.2651;

Ld = 0.0003752;

Ldq = [0.0003752 0.0004148];

Lq = 0.0004148;

Mechanical = [0.0227 0.0025 0];

P = 4;

PolePairs = 4;

Rs = 0.2;

T_eff_bp = [0 32.142857142857146 64.285714285714292 96.428571428571431 ...
            128.57142857142858 160.71428571428572 192.85714285714286 225 ...
            257.14285714285717 289.28571428571428 321.42857142857144 353.57142857142856 ...
            385.71428571428572 417.85714285714283 450];

T_max = 120;

T_mtpa = [0 13.313183476668906 26.627883688504991 39.945615932203161 53.267892634149675 ...
          66.596221931786857 79.932106274603782 93.2770410509712 106.63251324676918 ...
          120.00000014142789];

Tc = 0.02;

ba = 3.4029;

efficiency_table = ...
  [86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 ...
   86.7;
   86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 86.7 ...
   86.7;
   86.7 86.7 91.8 91.8 91.8 91.8 91.8 91.8 91.8 91.8 89.76 89.76 89.76 ...
   89.76 89.76;
   86.7 86.7 93.84 93.84 93.84 93.84 93.84 93.84 93.84 93.84 93.84 91.8 ...
   91.8 91.8 91.8;
   86.7 86.7 93.84 93.84 94.86 94.86 94.86 94.86 93.84 93.84 93.84 91.8 ...
   91.8 91.8 91.8;
   86.7 86.7 94.86 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 ...
   95.88 95.88 95.88;
   86.7 86.7 94.86 95.88 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9 96.9;
   86.7 86.7 94.86 95.88 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9 96.9;
   86.7 86.7 94.86 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9;
   86.7 86.7 94.86 95.88 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 96.9 ...
   96.9;
   86.7 86.7 94.86 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 95.88 ...
   95.88 95.88 95.88;
   86.7 86.7 91.8 93.84 94.86 94.86 94.86 94.86 94.86 94.86 94.86 94.86 ...
   94.86 94.86 94.86];

id_mtpa = [-0 -0.11452335264644302 -0.45798907645859321 -1.0300846437354467 ...
           -1.8302907522142136 -2.8578836734202446 -4.1119385056796318 ...
           -5.5913332979056971 -7.294754001684483 -9.2207002013803976];

idq0 = [0 0];

idq_limits = [-9.2206995420038051 166.99350139246025 167.2478723552486];

iq_mtpa = [0 18.582744034468025 37.163371911080382 55.739773489551126 74.309850618502082 ...
           92.871523015026824 111.42273400830018 129.96145610505366 148.48569633733024 ...
           166.99350135605215];

lambda_pm = 0.1194;

losses_table = ...
  [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];

mechanical = [0.0227 0.0025 0];

omega_init = 0;

power_max = 211000;

theta_init = 0;

torque_max = 450;

w_eff_bp = [0 1600 3200 4477.56 4800 6400 8000 9600 11200 12800 14400 16000 ...
            ];


%%% drivetrain

Jd = Simulink.Parameter;
Jd.Value = 0.025;
Jd.Complexity = 'real';
Jd.HasCoderInfo = false;
Jd.Description = '';
Jd.DataType = 'double';
Jd.Min = [];
Jd.Max = [];
Jd.DocUnits = '';

Jmotor = Simulink.Parameter;
Jmotor.Value = 0.1;
Jmotor.Complexity = 'real';
Jmotor.HasCoderInfo = false;
Jmotor.Description = '';
Jmotor.DataType = 'double';
Jmotor.Min = [];
Jmotor.Max = [];
Jmotor.DocUnits = '';

Jw1 = Simulink.Parameter;
Jw1.Value = 0.01;
Jw1.Complexity = 'real';
Jw1.HasCoderInfo = false;
Jw1.Description = '';
Jw1.DataType = 'double';
Jw1.Min = [];
Jw1.Max = [];
Jw1.DocUnits = '';

Jw2 = Simulink.Parameter;
Jw2.Value = 0.01;
Jw2.Complexity = 'real';
Jw2.HasCoderInfo = false;
Jw2.Description = '';
Jw2.DataType = 'double';
Jw2.Min = [];
Jw2.Max = [];
Jw2.DocUnits = '';

Ndiff = Simulink.Parameter;
Ndiff.Value = 7.94;
Ndiff.Complexity = 'real';
Ndiff.HasCoderInfo = false;
Ndiff.Description = '';
Ndiff.DataType = 'double';
Ndiff.Min = [];
Ndiff.Max = [];
Ndiff.DocUnits = '';

T = Simulink.Parameter;
T.Value = 273;
T.Complexity = 'real';
T.HasCoderInfo = false;
T.Description = '';
T.DataType = 'double';
T.Min = [];
T.Max = [];
T.DocUnits = '';

bd = Simulink.Parameter;
bd.Value = 0.001;
bd.Complexity = 'real';
bd.HasCoderInfo = false;
bd.Description = '';
bd.DataType = 'double';
bd.Min = [];
bd.Max = [];
bd.DocUnits = '';


bw1 = Simulink.Parameter;
bw1.Value = 0.001;
bw1.Complexity = 'real';
bw1.HasCoderInfo = false;
bw1.Description = '';
bw1.DataType = 'double';
bw1.Min = [];
bw1.Max = [];
bw1.DocUnits = '';

bw2 = Simulink.Parameter;
bw2.Value = 0.001;
bw2.Complexity = 'real';
bw2.HasCoderInfo = false;
bw2.Description = '';
bw2.DataType = 'double';
bw2.Min = [];
bw2.Max = [];
bw2.DocUnits = '';

omega_c = Simulink.Parameter;
omega_c.Value = 100;
omega_c.Complexity = 'real';
omega_c.HasCoderInfo = false;
omega_c.Description = '';
omega_c.DataType = 'auto';
omega_c.Min = [];
omega_c.Max = [];
omega_c.DocUnits = '';

omega_o = Simulink.Parameter;
omega_o.Value = 0;
omega_o.Complexity = 'real';
omega_o.HasCoderInfo = false;
omega_o.Description = '';
omega_o.DataType = 'double';
omega_o.Min = [];
omega_o.Max = [];
omega_o.DocUnits = '';

omegaw1o = Simulink.Parameter;
omegaw1o.Value = 0;
omegaw1o.Complexity = 'real';
omegaw1o.HasCoderInfo = false;
omegaw1o.Description = '';
omegaw1o.DataType = 'double';
omegaw1o.Min = [];
omegaw1o.Max = [];
omegaw1o.DocUnits = '';

omegaw2o = Simulink.Parameter;
omegaw2o.Value = 0;
omegaw2o.Complexity = 'real';
omegaw2o.HasCoderInfo = false;
omegaw2o.Description = '';
omegaw2o.DataType = 'double';
omegaw2o.Min = [];
omegaw2o.Max = [];
omegaw2o.DocUnits = '';

theta_o = Simulink.Parameter;
theta_o.Value = 0;
theta_o.Complexity = 'real';
theta_o.HasCoderInfo = false;
theta_o.Description = '';
theta_o.DataType = 'double';
theta_o.Min = [];
theta_o.Max = [];
theta_o.DocUnits = '';

domega_o = Simulink.Parameter;
domega_o.Value = 0;
domega_o.Complexity = 'real';
domega_o.HasCoderInfo = false;
domega_o.Description = '';
domega_o.DataType = 'double';
domega_o.Min = [];
domega_o.Max = [];
domega_o.DocUnits = '';

k = Simulink.Parameter;
k.Value = 10000;
k.Complexity = 'real';
k.HasCoderInfo = false;
k.Description = '';
k.DataType = 'auto';
k.Min = [];
k.Max = [];
k.DocUnits = '';

b = Simulink.Parameter;
b.Value = 400;
b.Complexity = 'real';
b.HasCoderInfo = false;
b.Description = '';
b.DataType = 'auto';
b.Min = [];
b.Max = [];
b.DocUnits = '';

%%%%%%%%%%%% BUS
CurrentLimits = Simulink.Bus;
CurrentLimits.Description = '';
CurrentLimits.DataScope = 'Exported';
CurrentLimits.HeaderFile = '';
CurrentLimits.Alignment = -1;
CurrentLimits.PreserveElementDimensions = false;
saveVarsTmp{1} = Simulink.BusElement;
saveVarsTmp{1}.Name = 'DischargeCurrentLimit';
saveVarsTmp{1}.Complexity = 'real';
saveVarsTmp{1}.Dimensions = 1;
saveVarsTmp{1}.DataType = 'single';
saveVarsTmp{1}.Min = [];
saveVarsTmp{1}.Max = [];
saveVarsTmp{1}.DimensionsMode = 'Fixed';
saveVarsTmp{1}.SamplingMode = 'Sample based';
saveVarsTmp{1}.DocUnits = 'A';
saveVarsTmp{1}.Description = '';
saveVarsTmp{1}(2, 1) = Simulink.BusElement;
saveVarsTmp{1}(2, 1).Name = 'ChargeCurrentLimit';
saveVarsTmp{1}(2, 1).Complexity = 'real';
saveVarsTmp{1}(2, 1).Dimensions = 1;
saveVarsTmp{1}(2, 1).DataType = 'single';
saveVarsTmp{1}(2, 1).Min = [];
saveVarsTmp{1}(2, 1).Max = [];
saveVarsTmp{1}(2, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(2, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(2, 1).DocUnits = 'A';
saveVarsTmp{1}(2, 1).Description = '';
CurrentLimits.Elements = saveVarsTmp{1};
clear saveVarsTmp;

Min_Max_Cells = Simulink.Bus;
Min_Max_Cells.Description = '';
Min_Max_Cells.DataScope = 'Exported';
Min_Max_Cells.HeaderFile = '';
Min_Max_Cells.Alignment = -1;
Min_Max_Cells.PreserveElementDimensions = false;
saveVarsTmp{1} = Simulink.BusElement;
saveVarsTmp{1}.Name = 'MinCellVolt';
saveVarsTmp{1}.Complexity = 'real';
saveVarsTmp{1}.Dimensions = 1;
saveVarsTmp{1}.DataType = 'single';
saveVarsTmp{1}.Min = 0;
saveVarsTmp{1}.Max = 5;
saveVarsTmp{1}.DimensionsMode = 'Fixed';
saveVarsTmp{1}.SamplingMode = 'Sample based';
saveVarsTmp{1}.DocUnits = 'V';
saveVarsTmp{1}.Description = '';
saveVarsTmp{1}(2, 1) = Simulink.BusElement;
saveVarsTmp{1}(2, 1).Name = 'MaxCellVolt';
saveVarsTmp{1}(2, 1).Complexity = 'real';
saveVarsTmp{1}(2, 1).Dimensions = 1;
saveVarsTmp{1}(2, 1).DataType = 'single';
saveVarsTmp{1}(2, 1).Min = 0;
saveVarsTmp{1}(2, 1).Max = 5;
saveVarsTmp{1}(2, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(2, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(2, 1).DocUnits = 'V';
saveVarsTmp{1}(2, 1).Description = '';
saveVarsTmp{1}(3, 1) = Simulink.BusElement;
saveVarsTmp{1}(3, 1).Name = 'MinCellTemp';
saveVarsTmp{1}(3, 1).Complexity = 'real';
saveVarsTmp{1}(3, 1).Dimensions = 1;
saveVarsTmp{1}(3, 1).DataType = 'single';
saveVarsTmp{1}(3, 1).Min = 263.15;
saveVarsTmp{1}(3, 1).Max = 333.15;
saveVarsTmp{1}(3, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(3, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(3, 1).DocUnits = 'K';
saveVarsTmp{1}(3, 1).Description = '';
saveVarsTmp{1}(4, 1) = Simulink.BusElement;
saveVarsTmp{1}(4, 1).Name = 'MaxCellTemp';
saveVarsTmp{1}(4, 1).Complexity = 'real';
saveVarsTmp{1}(4, 1).Dimensions = 1;
saveVarsTmp{1}(4, 1).DataType = 'single';
saveVarsTmp{1}(4, 1).Min = 263.15;
saveVarsTmp{1}(4, 1).Max = 333.15;
saveVarsTmp{1}(4, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(4, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(4, 1).DocUnits = 'K';
saveVarsTmp{1}(4, 1).Description = '';
Min_Max_Cells.Elements = saveVarsTmp{1};
clear saveVarsTmp;

SOC_Est = Simulink.Bus;
SOC_Est.Description = '';
SOC_Est.DataScope = 'Auto';
SOC_Est.HeaderFile = '';
SOC_Est.Alignment = -1;
SOC_Est.PreserveElementDimensions = false;
saveVarsTmp{1} = Simulink.BusElement;
saveVarsTmp{1}.Name = 'SOC_CC';
saveVarsTmp{1}.Complexity = 'real';
saveVarsTmp{1}.Dimensions = 1;
saveVarsTmp{1}.DataType = 'single';
saveVarsTmp{1}.Min = [];
saveVarsTmp{1}.Max = [];
saveVarsTmp{1}.DimensionsMode = 'Fixed';
saveVarsTmp{1}.SamplingMode = 'Sample based';
saveVarsTmp{1}.DocUnits = '';
saveVarsTmp{1}.Description = '';
saveVarsTmp{1}(2, 1) = Simulink.BusElement;
saveVarsTmp{1}(2, 1).Name = 'SOC_UKF';
saveVarsTmp{1}(2, 1).Complexity = 'real';
saveVarsTmp{1}(2, 1).Dimensions = 1;
saveVarsTmp{1}(2, 1).DataType = 'single';
saveVarsTmp{1}(2, 1).Min = [];
saveVarsTmp{1}(2, 1).Max = [];
saveVarsTmp{1}(2, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(2, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(2, 1).DocUnits = '';
saveVarsTmp{1}(2, 1).Description = '';
saveVarsTmp{1}(3, 1) = Simulink.BusElement;
saveVarsTmp{1}(3, 1).Name = 'SOC_EKF';
saveVarsTmp{1}(3, 1).Complexity = 'real';
saveVarsTmp{1}(3, 1).Dimensions = 1;
saveVarsTmp{1}(3, 1).DataType = 'single';
saveVarsTmp{1}(3, 1).Min = [];
saveVarsTmp{1}(3, 1).Max = [];
saveVarsTmp{1}(3, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(3, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(3, 1).DocUnits = '';
saveVarsTmp{1}(3, 1).Description = '';
SOC_Est.Elements = saveVarsTmp{1};
clear saveVarsTmp;

Sensors = Simulink.Bus;
Sensors.Description = '';
Sensors.DataScope = 'Auto';
Sensors.HeaderFile = '';
Sensors.Alignment = -1;
Sensors.PreserveElementDimensions = false;
saveVarsTmp{1} = Simulink.BusElement;
saveVarsTmp{1}.Name = 'Cell_Voltages';
saveVarsTmp{1}.Complexity = 'real';
saveVarsTmp{1}.Dimensions = 96;
saveVarsTmp{1}.DataType = 'single';
saveVarsTmp{1}.Min = 0;
saveVarsTmp{1}.Max = 5;
saveVarsTmp{1}.DimensionsMode = 'Fixed';
saveVarsTmp{1}.SamplingMode = 'Sample based';
saveVarsTmp{1}.DocUnits = 'V';
saveVarsTmp{1}.Description = '';
saveVarsTmp{1}(2, 1) = Simulink.BusElement;
saveVarsTmp{1}(2, 1).Name = 'Pack_Voltage';
saveVarsTmp{1}(2, 1).Complexity = 'real';
saveVarsTmp{1}(2, 1).Dimensions = 1;
saveVarsTmp{1}(2, 1).DataType = 'single';
saveVarsTmp{1}(2, 1).Min = 0;
saveVarsTmp{1}(2, 1).Max = 480;
saveVarsTmp{1}(2, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(2, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(2, 1).DocUnits = 'V';
saveVarsTmp{1}(2, 1).Description = '';
saveVarsTmp{1}(3, 1) = Simulink.BusElement;
saveVarsTmp{1}(3, 1).Name = 'Pack_Current';
saveVarsTmp{1}(3, 1).Complexity = 'real';
saveVarsTmp{1}(3, 1).Dimensions = 1;
saveVarsTmp{1}(3, 1).DataType = 'single';
saveVarsTmp{1}(3, 1).Min = -100;
saveVarsTmp{1}(3, 1).Max = 100;
saveVarsTmp{1}(3, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(3, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(3, 1).DocUnits = 'A';
saveVarsTmp{1}(3, 1).Description = '';
saveVarsTmp{1}(4, 1) = Simulink.BusElement;
saveVarsTmp{1}(4, 1).Name = 'Cell_Temperatures';
saveVarsTmp{1}(4, 1).Complexity = 'real';
saveVarsTmp{1}(4, 1).Dimensions = 96;
saveVarsTmp{1}(4, 1).DataType = 'single';
saveVarsTmp{1}(4, 1).Min = -10;
saveVarsTmp{1}(4, 1).Max = 40;
saveVarsTmp{1}(4, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(4, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(4, 1).DocUnits = 'degC';
saveVarsTmp{1}(4, 1).Description = '';
saveVarsTmp{1}(5, 1) = Simulink.BusElement;
saveVarsTmp{1}(5, 1).Name = 'Vout_Chgr';
saveVarsTmp{1}(5, 1).Complexity = 'real';
saveVarsTmp{1}(5, 1).Dimensions = 1;
saveVarsTmp{1}(5, 1).DataType = 'single';
saveVarsTmp{1}(5, 1).Min = -500;
saveVarsTmp{1}(5, 1).Max = 500;
saveVarsTmp{1}(5, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(5, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(5, 1).DocUnits = 'V';
saveVarsTmp{1}(5, 1).Description = '';
saveVarsTmp{1}(6, 1) = Simulink.BusElement;
saveVarsTmp{1}(6, 1).Name = 'Vout_Invtr';
saveVarsTmp{1}(6, 1).Complexity = 'real';
saveVarsTmp{1}(6, 1).Dimensions = 1;
saveVarsTmp{1}(6, 1).DataType = 'single';
saveVarsTmp{1}(6, 1).Min = -500;
saveVarsTmp{1}(6, 1).Max = 500;
saveVarsTmp{1}(6, 1).DimensionsMode = 'Fixed';
saveVarsTmp{1}(6, 1).SamplingMode = 'Sample based';
saveVarsTmp{1}(6, 1).DocUnits = 'V';
saveVarsTmp{1}(6, 1).Description = '';
Sensors.Elements = saveVarsTmp{1};
clear saveVarsTmp;
